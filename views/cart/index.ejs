<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Your Cart</title>
        <style>
            table { border-collapse: collapse; width: 100%; }
            th, td { border: 1px solid #ddd; padding: 8px; }
            th { text-align: left; }
            .right { text-align: right; }
            form { display: inline; }
        </style>
    </head>
    <body>
        <h1>Your Cart</h1>
        <p><a href="/products>← Continue shopping</a></p>
        <% const items = Object.values(cart.items || {}); %>
        <% if (items.length === 0) { %>
         <p>Your cart is empty.</p>
         <form method="post" action="/cart/clear"><button type="submit">Clear Cart</button></form>
        <% } else { %>
        <table>
            <thead>
                <tr>
                    <th>Name</th>th><th class="right">Unit Price</th>th><th class="right">Qty</th>th><th class="right">Line</th><th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% items.forEach(item => { %>
                <tr>
                    <td><%= item.name %></td>
                    <td class="right">¥<%= item.price.toFixed(2) %></td>
                    <td class="right"><%= item.qty %></td>
                    <td class="right">¥<%= (item.qty * item.price).toFixed(2) %></td>
                    <td>
                        <form method="post" action="/cart/<%= item.productId %>/increase"><button></button>+</form></button></form>
                        <form method="post" action="/cart/<%= item.productId %>/decrease"><button>-</button></form>
                        <form method="post" action="/cart/<%= item.productId %>/remove"><button>Remove</button></form>
                    </td>
                </tr>
            <% }) %>
            </tbody>
            <tfoot>
                <tr>
                    <th colspan="3" class="right">Subtotal</th>
                    <th class="right">¥<%= cart.subtotal.toFixed(2) %></th>
                    <th></th>
                </tr>
            </tfoot>
        </table>}

        <p>
            <form method="post" action="/orders"><button type="submit">Submit Order</button></form>
            <form method="post" action="/cart/clear"><button type="submit">Clear Cart</button></form>
        </p>
        <% } %>
    </body>
</html>